<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Events by Region</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    h1 {
      text-align: center;
    }
    .region-container {
      margin-bottom: 20px;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }
    .region-container h2 {
      margin-bottom: 10px;
    }
    .event {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }
    .event img {
      width: 200px;
      height: 100px;
      object-fit: cover;
      margin-right: 15px;
      border: 1px solid #ddd;
    }
    .event p {
      margin: 5px 0;
    }
  </style>
</head>
<body>
  <h1>Game Events by Region</h1>
  <div id="eventsContainer"></div>

  <script>
    // Old and new API endpoints
    const endpoints = {

      ind: 'https://api.nowgarena.com//api/events?region=ind&key=projetoswq',
      sg: 'https://api.nowgarena.com//api/events?region=sg&key=projetoswq',
      vn: 'https://api.nowgarena.com//api/events?region=vn&key=projetoswq',
      br:'https://api.nowgarena.com//api/events?region=br&key=projetoswq',
      th:'https://api.nowgarena.com//api/events?region=th&key=projetoswq',
      me:'https://api.nowgarena.com//api/events?region=me&key=projetoswq',
      
      
    };

    const eventsContainer = document.getElementById('eventsContainer');

    function fetchEvents(region, url) {
      fetch(url)
        .then(response => response.json())
        .then(data => {
          console.log(`Data for ${region}:`, data);
          const events = data.events || [];
          if (events.length > 0) {
            const regionSection = createRegionSection(region, events);
            eventsContainer.appendChild(regionSection);
          } else {
            displayNoDataMessage(region);
          }
        })
        .catch(error => {
          console.error(`Error fetching events for ${region}:`, error);
          displayErrorMessage(region);
        });
    }

    function createRegionSection(region, events) {
      const regionDiv = document.createElement('div');
      regionDiv.classList.add('region-container');
      const regionTitle = document.createElement('h2');
      regionTitle.textContent = `Region: ${region.toUpperCase()}`;
      regionDiv.appendChild(regionTitle);

      events.forEach(event => {
        const eventDiv = document.createElement('div');
        eventDiv.classList.add('event');

        const eventImg = document.createElement('img');
        eventImg.src = event.image || event.link1 || 'https://via.placeholder.com/200x100?text=No+Image';
        eventImg.alt = event.title || 'No Title';
        eventDiv.appendChild(eventImg);

        const eventDetails = document.createElement('div');
        const startTime = event.start || event.showTime;
        const endTime = event.end || event.endTime;

        eventDetails.innerHTML = `
          <p><strong>${event.title || 'Unnamed Event'}</strong></p>
          <p>Start: ${startTime ? new Date(startTime * 1000).toLocaleString() : 'N/A'}</p>
          <p>End: ${endTime ? new Date(endTime * 1000).toLocaleString() : 'N/A'}</p>
        `;
        eventDiv.appendChild(eventDetails);

        regionDiv.appendChild(eventDiv);
      });

      return regionDiv;
    }

    function displayNoDataMessage(region) {
      const noDataDiv = document.createElement('div');
      noDataDiv.classList.add('region-container');
      noDataDiv.innerHTML = `<h2>Region: ${region.toUpperCase()}</h2><p>No events available.</p>`;
      eventsContainer.appendChild(noDataDiv);
    }

    function displayErrorMessage(region) {
      const errorDiv = document.createElement('div');
      errorDiv.classList.add('region-container');
      errorDiv.innerHTML = `<h2>Region: ${region.toUpperCase()}</h2><p>Error loading events.</p>`;
      eventsContainer.appendChild(errorDiv);
    }

    // Fetch events for all regions
    Object.keys(endpoints).forEach(region => fetchEvents(region, endpoints[region]));
  </script>
</body>
</html>